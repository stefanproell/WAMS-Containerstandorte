/**
© 2016 Stefan Pröll, Austria
*/

var wamsJSON = {
    "containerStandorte": [
        {
            "id": "1",
            "name": "Pfarre Allerheiligen",
            "address": "St.-Georgs-Weg 15, 6020, Innsbruck, Austria",
            "latitude": 47.2680316,
            "longitude": 11.355563999999958
        },
        {
            "id": "2",
            "name": "Endhaltestelle 3er Linie Amras",
            "address": "Philippine-Welser-Straße 49, 6020, Innsbruck, Austria",
            "latitude": 47.2589929,
            "longitude": 11.42600379999999
        },
        {
            "id": "3",
            "name": "DEZ Einkaufszentrum Parkgarage",
            "address": "Amraser-See-Straße 56a,6020 Innsbruck, Austria",
            "latitude": 47.2625925,
            "longitude": 11.430842299999995
        },
        {
            "id": "4",
            "name": "Wohnanlage Neue Heimat",
            "address": "Geyrstraße 27-29, 6020 Innsbruck, Austria",
            "latitude": 47.2614899,
            "longitude": 11.426765700000033
        },
        {
            "id": "5",
            "name": "MPREIS Haller Straße",
            "address": "Hallerstraße 212, 6020 Innsbruck, Austria",
            "latitude": 47.2769524,
            "longitude": 11.442559599999981
        },
        {
            "id": "6",
            "name": "Recyclinginsel Novapark",
            "address": "Arzlerstraße 43, 6020 Innsbruck, Austria",
            "latitude": 47.2833947,
            "longitude": 11.424273299999982
        },
        {
            "id": "7",
            "name": "Höhenstraße / Hungerburg (neben Spar)",
            "address": "Höhenstraße 125,6020 Innsbruck, 6020, Innsbruck, Austria",
            "latitude": 47.2841353,
            "longitude": 11.394666799999982
        },
        {
            "id": "8",
            "name": "Recyclinginsel Schneeburggasse",
            "address": "Schneeburggasse 116, 6020 Innsbruck, Austria",
            "latitude": 47.2695889,
            "longitude": 11.364059699999984
        },
        {
            "id": "9",
            "name": "Recyclinginsel Schulgasse",
            "address": "Schulgasse, 6020 Innsbruck, Austria",
            "latitude": 47.2721183,
            "longitude": 11.385485499999959
        },
        {
            "id": "10",
            "name": "MPreis Fischerhäuslweg 31",
            "address": "Fischerhäuslweg 31, 6020 Innsbruck, Austria",
            "latitude": 47.261875,
            "longitude": 11.364496700000018
        },
        {
            "id": "11",
            "name": "Pfarre Petrus Canisius",
            "address": "Santifallerstraße 5,6020 Innsbruck Austria",
            "latitude": 47.2635626,
            "longitude": 11.380990800000063
        },
        {
            "id": "12",
            "name": "MPreis Bachlechnerstraße",
            "address": "Bachlechnerstraße 46, 6020 Innsbruck",
            "latitude": "",
            "longitude": ""
        },
        {
            "id": "13",
            "name": "Recyclinginsel, Reimmichlgasse",
            "address": "Reimmichlgasse, 6020 Innsbruck, Austria",
            "latitude": 47.26229,
            "longitude": 11.368480500000032
        },
        {
            "id": "14",
            "name": "Universitätssportinstitut USI",
            "address": "Universitätssportinstitut USI, Fürstenweg 185, 6020 Innsbruck, Austria",
            "latitude": 47.2561431,
            "longitude": 11.355990199999951
        },
        {
            "id": "15",
            "name": "Recyclinginsel Rehgasse / Sieglangersteg",
            "address": "Rehgasse 8, 6020 Innsbruck, Austria",
            "latitude": "",
            "longitude": ""
        },
        {
            "id": "16",
            "name": "Wohnanlage Neue Heimat",
            "address": "Wohnanlage Neue Heimat, Mitterweg 157, 6020 Innsbruck, Austria",
            "latitude": 47.255256,
            "longitude": 11.36083819999999
        },
        {
            "id": "17",
            "name": "Wohnhaus Lohbachufer 1",
            "address": "Wohnhaus Lohbachufer 1, 6020 Innsbruck, Austria",
            "latitude": "",
            "longitude": ""
        },
        {
            "id": "18",
            "name": "Wohnheim Lohbach, Technikerstraße 84",
            "address": "Wohnheim Lohbach, Technikerstraße 84, 6020 Innsbruck, Austria",
            "latitude": "",
            "longitude": ""
        },
        {
            "id": "19",
            "name": "Recyclinginsel Gesetzbichlweg",
            "address": "Gsetzbichlweg, Igls, 6020 Innsbruck, Austria",
            "latitude": 47.2302326,
            "longitude": 11.402368700000011
        },
        {
            "id": "20",
            "name": "Pfarre Kranebitten",
            "address": "Pfarre Kranebitten, Klammstraße 5a, 6020 Innsbruck, Austria",
            "latitude": "",
            "longitude": ""
        },
        {
            "id": "21",
            "name": "Recyclinginsel, Kajethan-Sweth-Straße",
            "address": "Recyclinginsel, Kajethan-Sweth-Straße 14, 6020 Innsbruck, Austria",
            "latitude": 47.2709673,
            "longitude": 11.44267519999994
        },
        {
          "id": "21",
          "name": "Recyclinginsel, Kajethan-Sweth-Straße",
          "address": "Recyclinginsel, Kajethan-Sweth-Straße 14, 6020 Innsbruck, Austria",
          "latitude": 47.2709673,
          "longitude": 11.44267519999994
          },
          {
              "id": "22",
              "name": "Wohnanlage Neue Heimat, An-der-Lan-Str. ",
              "address": "Wohnanlage Neue Heimat, An-der-Lan-Str. 20, 6020 Innsbruck, Austria",
              "latitude": 47.2731363,
              "longitude": 11.436393400000043
          },
          {
              "id": "23",
              "name": "Wohnanlage Neue Heimat, Clemens-Holzmeister-Straße",
              "address": "Clemens-Holzmeister-Straße, 6020 Innsbruck, Austria",
              "latitude": 47.2681689,
              "longitude": 11.346175300000027
          },
          {
              "id": "24",
              "name": "Caritas Integrationshaus",
              "address": "Caritas Integrationshaus, Gumppstraße 71, 6020 Innsbruck, Austria",
              "latitude": 47.2669432,
              "longitude": 11.418813499999942
          },
          {
              "id": "25",
              "name": "Recclinginsel ggü. Pacherstraße 14",
              "address": "Pacherstraße 14, 6020 Innsbruck, Austria",
              "latitude": 47.26125099999999,
              "longitude": 11.414036600000031
          },
          {
              "id": "26",
              "name": "Recyclinginsel, Tivoli NEU / gegenüber Olympiastraße 7",
              "address": "Olympiastraße 7, 6020 Innsbruck, Austria",
              "latitude": 47.2580439,
              "longitude": 11.40445299999999
          },
          {
              "id": "27",
              "name": "Volksschule Leitgeb, Pradlerstraße",
              "address": "Volksschule Leitgeb, Pradlerstraße, 6020 Innsbruck, Austria",
              "latitude": 47.26612739999999,
              "longitude": 11.409056299999975
          },
          {
              "id": "28",
              "name": "Wohnhaus Amraserstraße / Pradlerstraße 78",
              "address": "Pradlerstraße 78, 6020 Innsbruck, Austria",
              "latitude": 47.2633524,
              "longitude": 11.410017599999946
          },
          {
              "id": "29",
              "name": "Wohnanlage Neue Heimat, Langstraße 31",
              "address": "Langstraße 31, 6020 Innsbruck, Austria",
              "latitude": 47.2644467,
              "longitude": 11.41490250000004
          },
          {
              "id": "30",
              "name": "Wohnanlage Alpenländische Heimat, Karwendelstraße",
              "address": "Karwendelstraße 13, 6020 Innsbruck, Austria",
              "latitude": 47.2557856,
              "longitude": 11.38482369999997
          },
          {
              "id": "31",
              "name": "Wohnanlage Neue Heimat, Körnerstraße",
              "address": "Körnerstraße 19, 6020 Innsbruck, Austria",
              "latitude": 47.2640471,
              "longitude": 11.40875010000002
          },
          {
             "id": "32",
             "name": "Wohnanlage Neue Heimat, Türingstraße",
             "address": "Türingstraße 12, 6020 Innsbruck, Austria",
             "latitude": 47.2669427,
             "longitude": 11.416109699999993
         },
         {
             "id": "33",
             "name": "Wohnanlage Neue Heimat, Gumppstraße",
             "address": "Gumppstraße 27, 6020 Innsbruck, Austria",
             "latitude": 47.2648473,
             "longitude": 11.411951799999997
         },
         {
             "id": "34",
             "name": "Wohnanlage Neue Heimat, Mösslgasse",
             "address": "Mösslgasse 19, 6020 Innsbruck, Austria",
             "latitude": 47.2627143,
             "longitude": 11.421906100000001
         },
         {
             "id": "35",
             "name": "Wohnanlage Neue Heimat, Bienerstraße 27",
             "address": "Bienerstraße 27, 6020 Innsbruck, Austria",
             "latitude": 47.2733374,
             "longitude": 11.407223599999952
         },
         {
             "id": "36",
             "name": "Wohnanlage Neue Heimat, Pradler Saggen",
             "address": "Wohnanlage Neue Heimat, Pradler Saggen 17, 6020 Innsbruck, Austria",
             "latitude": 47.2742822,
             "longitude": 11.414366100000052
         },
         {
             "id": "37",
             "name": "Wohnanlage Neue Heimat, Viktor-Dankl-Straße",
             "address": "Wohnanlage Neue Heimat, Viktor-Dankl-Straße 10, 6020 Innsbruck, Austria",
             "latitude": 47.2768704,
             "longitude": 11.409787400000027
         },
         {
             "id": "38",
             "name": "Pfarre St. Pirmin",
             "address": "Pfarre St. Pirmin, Radetzkystraße 51, 6020 Innsbruck, Austria",
             "latitude": 47.2697195,
             "longitude": 11.425329899999952
         },
         {
             "id": "39",
             "name": "Recyclinghof, Rossau",
             "address": "Roßaugasse 4a,6020 Innsbruck, 6020 Innsbruck, Austria",
             "latitude": 47.2720671,
             "longitude": 11.432478500000002
         },
         {
             "id": "40",
             "name": "Recyclinginsel, General-Eccher-Straße",
             "address": "General-Eccher-Straße, 6020 Innsbruck, Austria",
             "latitude": 47.2755357,
             "longitude": 11.418844400000012
         },
         {
             "id": "41",
             "name": "Recyclinginsel, Radetzkystraße / Gutshofweg",
             "address": "Radetzkystraße 16, 6020 Innsbruck, Austria",
             "latitude": 47.2728215,
             "longitude": 11.420269800000028
         },
         {
             "id": "42",
             "name": "Wohnanlage Neue Heimat,Andechstraße",
             "address": "Wohnanlage Neue Heimat, Andechstraße 59, 6020 Innsbruck, Austria",
             "latitude": 47.2692124,
             "longitude": 11.404102400000056
         },
         {
            "id": "43",
            "name": "Wohnanlage Neue Heimat, Klappholzstraße 44",
            "address": "Klappholzstraße 44, 6020 Innsbruck, Austria",
            "latitude": 47.271518,
            "longitude": 11.420990899999993
        },
        {
            "id": "44",
            "name": "Avanti Tankstelle Andechstraße",
            "address": "Andechstraße 86, 6020 Innsbruck, Austria",
            "latitude": 47.2652635,
            "longitude": 11.425214399999959
        },
        {
            "id": "45",
            "name": "Flüchtlingsheim, Trientlgasse",
            "address": "Trientlgasse 2, 6020 Innsbruck, Austria",
            "latitude": 47.2703101,
            "longitude": 11.427049099999977
        },
        {
            "id": "46",
            "name": "Pfarre Maria am Gestade",
            "address": "Weingartnerstraße 44, 6020 Innsbruck, Austria",
            "latitude": 47.2524266,
            "longitude": 11.364147000000003
        },
        {
            "id": "47",
            "name": "Burgweg 1",
            "address": "Burgweg 1, 6080 Innsbruck, Austria",
            "latitude": 47.2132448,
            "longitude": 11.393442100000016
        },
        {
            "id": "48",
            "name": "Stift Wilten",
            "address": "Klostergasse 7, 6020 Innsbruck, Austria",
            "latitude": 47.2540493,
            "longitude": 11.400860999999963
        },
        {
            "id": "49",
            "name": "Recyclinginsel, Karmelitergasse / Liebeneggstraße",
            "address": "Liebeneggstraße 15, 6020 Innsbruck, Austria",
            "latitude": 47.2591706,
            "longitude": 11.398954000000003
        }
    ]
}


        function initialize() {
          var innsbruck = { lat: 47.2656733, lng: 11.3941983 };
          var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 14,
            center: innsbruck
          });

          // Load Google Geocoder Library
          var geocoder = new google.maps.Geocoder();
          // Parse the data into a JSON




;
          // Iterate over all containers
          for(var i =0; i < wamsJSON.containerStandorte.length;i++){
              var container = wamsJSON.containerStandorte[i];
              placeMarkerOnMap(geocoder, map, container);
          };
        }

    // Custom marker
    var wamsLogo = {
      url: 'images/wams.png',
      // This marker is 20 pixels wide by 32 pixels high.
      size: new google.maps.Size(64, 64),
      // The origin for this image is (0, 0).
      origin: new google.maps.Point(0, 0),
      // The anchor for this image is the base of the flagpole at (0, 32).
      anchor: new google.maps.Point(64, 70)
    };

    // Define the shape for the marker
    var shape = {
      coords: [1, 1, 1, 64, 64, 64, 64, 1],
      type: 'poly'
    };

    // Place marker on the map
    function placeMarkerOnMap(geocoder, resultsMap, container) {
        // Create Google position object with latitude and longitude from the container object
        var positionLatLng = new google.maps.LatLng(parseFloat(container.latitude),parseFloat(container.longitude));
        // Create marker with the position, logo and address
        var marker = new google.maps.Marker({
          map: resultsMap,
          position: positionLatLng,
          icon: wamsLogo,
          shape: shape,
          title: container.address,
          animation: google.maps.Animation.DROP
        });
    }

    function jsonEscape(str)  {
        alert('escpe');
    return str.replace(/\n/g, "\\\\n").replace(/\r/g, "\\\\r").replace(/\t/g, "\\\\t");
}


    // Place marker on the map
    google.maps.event.addDomListener(window, 'load', initialize);
